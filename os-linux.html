<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>zk-note: 操作系统：Linux</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">zk-note
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('os-linux.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">操作系统：Linux </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>这个页面主要记录一些Linux操作系统的知识</p>
<h2>如何非阻塞运行gui程序？</h2>
<p>问题：如果直接在终端运行某个gui程序，终端会阻塞直到gui关闭，例如运行gitk。 那么如何运行程序，并且不阻塞终端呢？ 解法：</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;gitk &amp;</div></div><!-- fragment --><h2>如何查看目录和文件占用磁盘大小？</h2>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;du -h -d 1 ./</div></div><!-- fragment --><p>du表示disk usage，-h参数表示使用人类可读的单位，即KB,MB,GB为单位，如果不设置这个参数，得到的数字很奇怪，也不是以byte为单位的。-d表示递归的深度，如果只看当前目录，选择1，后面./就是目录位置。</p>
<p>这样的方式只会显示文件夹的大小，如果要显示文件的大小，用下面这个命令。</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;du -h -d 1 ./*</div></div><!-- fragment --><h2>如何查看文件的后面n行？</h2>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;tail -n 5 ./filename.txt</div></div><!-- fragment --><h2>如何循环执行某个命令？</h2>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;while : ; do tail -n 5 ./filename.txt; sleep 1; done;</div></div><!-- fragment --><h2>ln -s 命令无效？</h2>
<ol type="1">
<li>使用ln -s命令，一定要输入目标文件的绝对路径，而不是相对路径！</li>
<li>如果目标文件在NTFS磁盘上，那么这种连接是无效的！</li>
</ol>
<h2>find命令</h2>
<p>怎么查找名称带有“[”和“]”的文件？ </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;find . -name &quot;\[xxx\]&quot;</div></div><!-- fragment --><p> find工具认为中括号有特定含义，即寻找从哪个字母到哪个字母开始的文件，如果确实要使用中括号，就应该使用转义字符。</p>
<h2>find + rm 命令</h2>
<p>使用find + rm 命令可以轻松删除特定文件，而且先find一遍，可以看看是否会误删其他文件，确认没问题之后再使用rm，即安全也高效。 </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;#第一遍先看看会删除哪些文件</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;find . -name xxx</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;#确认没问题后，第二遍删除</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;find . -name xxx | xargs rm</div></div><!-- fragment --><p>## 查看滚动的log文件 </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;tail -f xxx.log</div></div><!-- fragment --><p> 参数“-f”表示“follow”，即当文件有更新的时候，追加打印更新的内容，这样一来，看log文件就和命令运行程序一样了。</p>
<h2>busybox</h2>
<p>这是一个工具的集合，很多比较简陋的嵌入式linux环境无法提供太多的工具，busybox就作为一个工具箱，提供丰富的工具支持，例如上述的tail命令。</p>
<h2>script中的source</h2>
<p>script中的source命令是无效的！ 所以，如果想要在script中source ~/.bashrc，也是无效的。 有点奇怪，有些说法是calling bash不受callee bash的影响。 所以想要source ~/.bashrc可以这样</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;# Add something to ~/.bashrc</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;echo MY_VARIABLE &gt; ~/.bashrc</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;exec bash</div></div><!-- fragment --> <h3>/bin/sh&amp;M bad interpreter</h3>
<p>直接原因是第一行结尾字符有问题，一般的源头是bash的脚本文件在Windows被重新编辑过，Windows和Linux下的换行是不同的字符表达的，回到Linux时就可能出错。</p>
<h3>.netrc文件注册网络账户和密码</h3>
<p>很多web应用需要用户提供账户和密码，如果一开始没有在web端设置好，或者说没有办法在web端设置，例如gerrit上http形式的仓库URL，交互程序一般会阻塞并弹出输入账户和密码的提示。 这样的交互有2点不好。 1.有些账户密码很长，还不能够自行设置，没错，说的就是gerrit的anomynous http地址，每次都要从gerrit上复制密码，降低效率。 2.自动化脚本，无法执行交互。 那有没有办法解决这个问题呢？其实是可以的，使用Linux自带的feature：.netrc文件，文件在&lt;tt&gt;~目录下 下面就是.netrc文件的内容示例。 </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;machine github.com login qinzhengke password xxxxx</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;machine 192.168.0.5 login qinzhengke password xxxx</div></div><!-- fragment --> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">zk-note 简介</a></li><li class="navelem"><a class="el" href="tools.html">工具</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
